sudo: required
services:
- docker
before_install:
- openssl aes-256-cbc -K $encrypted_4e3692f7e525_key -iv $encrypted_4e3692f7e525_iv
  -in deploy_key.enc -out deploy_key -d
- docker login --username=$DOCKER_HUB_USERNAME --password=$DOCKER_HUB_PASSWORD
- docker build -t my-gateway .
script:
- docker tag my-gateway:latest $DOCKER_HUB_USERNAME/my-gateway:production
- docker push $DOCKER_HUB_USERNAME/my-gateway:production
after_script: 
deploy:
  provider: script
  skip_cleanup: true
  script: chmod 600 deploy_key && ssh -p $SERVER_PORT -o StrictHostKeyChecking=no
    -i ./deploy_key $SERVER_USERNAME@$SERVER './gateway/deploy.sh'
  on:
    branch: master
env:
  global:
  - secure: h56ZmfjM51utao/lbZs7d/FMThJWaq0cktDKZOpxpmjiMk06CkdTgrddtruZ4bo+A2kzWhFnaxXxQ56Ssn8vXEo53kvJ2u9UeTKKkKj+vEMKFZ3xdCYTyDbfc9JAN+dhUvzftjx0s4gcMlIlvJwES6uPpAvHnfiEcoNsOrAU/4JW5EfSzZ7GHJsL4ZfWH+oiJQaAEE9xSahBQWu03nmCalSrWUGzWA0145oTvgq2kY0/L8NS6D3xMK/l+4Cb0OIycmEisRrYmy4qEPNMEppwGPt2gnGxFa3Q028I7OYoRy49NyU4pJADes1EOE2Gs7CopzYlsCsfHs2mYjcLTVutcnRKfweqCF3H2LvGRNttZVFTn4sNXcvMRCSzDPpAXc+HyRKoXiXVYoBhVU1OG3a66CXX/nnjz56NOWUkKaW6A3uZAA/8Op2KLu4l2PpQawRPOsRTaEn9nWFU4gQ76Zc70DJ8w0TpKb4w00L8s0Adr8q6wlDpzClQbgRP+mFXSkNeFUqml6d93pCLYQP7/LXgFx93d5S8kKa5PNDgRa72XosFxjoOvxgtlNPyvH6nIbGJcpHCFhyrjo+7NV/dQGzGVFgSgtQnxBmIVtSqNSwAXookJl+7AmMLlaOkcguMZM/EVqGarn/0DU23vWRJzp9GD89nGWO17njrzPT0MS0p81I=
  - secure: jPrIXj5IlQebeKsLvaH6owpl5D56Ml6XiQNu5rdW/y2sHQoAhYUC6pvm+6OnJyzpFvDHyqt4kVpPweKyFtRIVxnFN0nSlv0su/V403NKf76QA16wD1i+DNKh16eeZrgaSz05fqMdbU3Sj6apdlsMhLLZVQrhxkhsCEXTPDEUlWrFeiFttfrrK013zt8PVNIY08Y14JiN8UqjJxopKsRCVE4lZ7RuVtb9HckL+IG5wavL1iUFOOF+EZqI76Yf1QvPyTsQ2RT+LD+caw7/9ZgH99jIiDtNllxnePk2/rloqJJ0A0psnFG+7QGsO2kjzi0sF7P+8DMWQ+FH3ZSHRvT1+PBJAqWHb4kXGo7V4t1x+of2DnmLtHRH1E2a+G/6NQ7NoWUwN9qBqrX1+g91rFfbKXGSIguBKBljWVe3uH7CLD6kJi6rmt7/nEctHRPUmm1NXySab7ynSzyJfXNoCjGtbrwvClS4bsoykolesBBYsUjRVGYcmGl/bE/Tjjh8SMhg1DMxM3nl7EyBdUYT9vjls/RisaOuQsJNkRraI8v/YQy/8JE99YsCAtS3nYhdxocCdiylORG/0lh6AKVAqT5LAMaJeAILKXqg3wY0ekLqWsisRqlODTkyHIMLh2IfFnZCq4pHSYgkxg/sW+Raho1ci95wlC5ksXD+B2milug0ldw=
  - secure: QbujKtnBYiMBoKO+Yd3z9hZjKrH5aTnUDXaPmDidaf05rQoEiehjm0qnhuF9pFwv6voxiHzHcWQdMqc/4laW4rCJQM7oqjZim1eIr1hXF9ePEPbt3spoAf13ETQDKiTlWbkwjLeyh3p7pKpprfn4GkWjociNgwz9Uz1/rnOLdUqp+wcjyvbdD+wONpJEfmPKZ1aGMRO6XIETt0GMHk/g76UYY++V8GMPreOlRMYISLtdUY/q7KKKOZicACGT3W1QDh6G9B+R4liy2gsaW6pMFiV2VEl0KyfgeCoO5CTOz+qFoOQ5wquY9JY/En32Rh+cgit5UsBIW+sypsZg7hQUNHFnxj46UDw05USsyCZU1yhDS0i+e5EyNtXdEmrw+KeGD/Z6H8xBkeu/xdMH95Zk+x0eOfwYKTg8RqvrcKTPK/CvvOoa8vTTw4orD681X6hQDjUad8wHYYt5aBEodzVyxeludxnjPGMlT+iCpWNi7wBuCqtpDfN9Kq0wquRA4OVsMHMYB2KOpPxRxWZ57V/jEYjQ+4Q1X6ihcEzdloULcyxxvv3qM+GK93dXz/NcLSEhivsX488ZobxJss0wqLUwX1jo3t+p9iB9bRLpVidtVEywxIa7PdFHut2rDcNnBAgmDJO65MUTfAY2aT3UavZadDDDPUKkYtxBCqOwuGnP+LU=
  - secure: iW8iSKpDn+tghrdhmv4he1KJhgtLlIC5oStBRv0OxkaqAxuokp576LrQTaeSi2BN6DQmbWT1Rib/rLyQsRwQAhZynywA+DVZ2CX83r3F5oUR+FustIJNpWy7NK/WDPbTTrGp3H1RaGnQ5Krv/2xbXGA6vBT7EWf0KaemYVLf59yVegrnbV+4PSsuPJEIh/eVMBdRTUWjH+XPPpGGwV5trhjChIbOPA31mSWNpFO3AQ9UHVrTE3LYguQv9QJxJ0IAjplF1Qrs63bRMGs5Ud1yjP0q3zlXiJ/lxOXXw4dsTpw0Ro2ga2XwuiuJk0/oc3Ltvc5ey5ZEGe07rLgNGn1/Cw+QsJOWXPNj6UIB+t3zJP/C9sF7OVn6JUXkxwKZUbEPPtQ0x705z8YSqdaZN77mNwbuN/7Fgjhe26fK7we9t4hFnYSLNcSzjqd5FIYPcZYL4wxO9kK5J1nt/9v4qorrVIxhLQqSzkJLD84mvobQnfL3qeee4e+xMQBboAvDNgQz/myFAtLqIQD0rWcHfclHKgHgycoBzMfrfH7BGzmYKbRnajIskRD/w6MGd/VL4IXZH/FL2SkjjSQ0nDxdJIbRPIBE4Oja7tVXmLRdlbyg36LTLr0kz9Td4QUUnpgwEvbZagndBsUzTgcmojLLTGrw6A61G9hoSMIlvE3LVi2RX8c=
  - secure: QXjtrpRTdt5g59p2NTEAsbXSZBTuMy4ZVtteMY+ZyuBGJWzEPg34bRPlNSD86aJ3mZP5RzfZetHaorPj4Ub17gGP3I10o8XGI0zM0SUACRvvqqVJvZ9U7lLtffi8OwzM2tP/u+Fr5tLQM/woDh4gT/smQ1PH6mJMqKjtMw7FBnoIrKz7pV/Dad/q0xRxu6RNy2l782M9rAn4ZXJz7XR5DZ97040rlvRmBwnCL9xmJgbXuyd/XzznOuWPh5BVnlzlxP1IGbaJEj0OGXFPO94EyVLQOInMnWQ670IA3PC0TmTGsfk+C8qjizW6UnfvgNFQF564A2Kp9jTfDKxeOp6pYgx1A4KHhduZUKLLB0VR3P+VODgApiv4qY/V4q6hJZ1PzQrBVwo5v2EecTd0ZGQEjKZrvbWd1smXCXN1Ohf2QxeOUZNP7PZZ1vVoe+XmQXEmgtRw5bqXip45uQw62wykN5EWBqtMlDkIZjHb0BwGpQQVckp7oXgiVmY/w+bl6D50OIlr1A7FZzTYSHabmQ6yIgatPatbf/tFmc8xezTZFAbesQgh+rtKrlEMHLJ98NW1SoKGiNiKAbW+sly+30Ss0SBJ8D+L5+SCTb7OQuT8XP/41LC+VSBiVeReQ2Hm2+xl95I6BbTzdvY8mVw7k/ZduYsrli4sLd/YLCgYx7mg6XE=
