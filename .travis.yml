sudo: required
services:
- docker
before_install:
- openssl aes-256-cbc -K $encrypted_031f0cce41a3_key -iv $encrypted_031f0cce41a3_iv
  -in deploy_key.enc -out deploy_key -d
- docker login --username=$DOCKER_HUB_USERNAME --password=$DOCKER_HUB_PASSWORD
- docker build -t my-gateway .
script:
- docker tag my-gateway:latest $DOCKER_HUB_USERNAME/my-gateway:production
- docker push $DOCKER_HUB_USERNAME/my-gateway:production
after_script: 
deploy:
  provider: script
  skip_cleanup: true
  script: chmod 600 deploy_key && ssh -p $SERVER_PORT -o StrictHostKeyChecking=no
    -i ./deploy_key $SERVER_USERNAME@$SERVER './gateway/deploy.sh'
  on:
    branch: master
env:
  global:
  - secure: gLL1c5JwOQcGQDSOWhQWtVs0FlMw/OBtm/KW50JScjhaVQjxWkg1XBpqz7hVIiD3ISlc/I+XlrQLXrgN5YMCz90OD3lZ5aUFtgJnRcknQnW4oxlXpTuOhLFiP55kfdRt7/jREn9wlSvoqWlYQeMvpQww6yko3FmZOEEwY4Hxd3dq8fjJlIrSF0jmQUatdh6KVw2H3jMkFJxMDh4VR/HkPC2rfOB6e57uvM1rDE1ZFKwmWjP4MwCrA5G0RVaHydZHtB0jfBiIIuLZXhD/neLtZz6E1QOZa+0oFC5VtboFQvxEdGMDB/GDxPIVgmOkejMuUpA3UJNIrooxFKrDYu98WP/11Hyl3TDW51PZkHObYqrXMLrz0FEopQuoSUIzcwXg36iHT/xVbM9iQvjdaz5zntdyT5X0lS9cYv+GABri5z2F4ovxstbkx2IonnSWtFaoSo6tXseM9yip5jMvJJYSOiCwNAG0IKuOfG9NcdRkcRKO7PnWU2QF1cBAL7Q+4UStd2cFPpWVYWqkQeyN/wAHlDlgrajaGk1tCQJbLVHmAKzgaA0LrCl93DsUOSMXLDY2RjK/OSn7uGiIXkWt5u45T9DfNeoiDqMnE1sbZLYf1F8sdrFCpHUif/bBDdvV06IAwDsUE4gvk/Z71vVZKU/F/CbDFe/PDDhlM639shSoqtM=
  - secure: ewu832xzuD+9hMfQETb7ZPGGDNYwQLhnGwaOOTH4Ue1aeNHZjLLQP7791oaQ0s5h0EB+9h0IMilLv5Urg7TDlu6rI7n+phiaP7wK+c04xFNbPJDJvesyymQa05MGlK4nk1/DmOM+QXCgbNfan0VHsLJx8SdbL18eCBm7sMLrB5+/Agi/6fMQwcdYI7abr11ezcTqSFlCAKlJ//AYRscQ2PKO5zQDTQzOtcQoNiL/RatVCOGlXASt+6xjVbmJwy8e3O+h/WKfoQvCVz38U5PzMLMQ0y2x7d9fK1HgHa95KugaBqOTXD84gzKmamOuG95TlBoBkDknwjFAPCGZeaywpaduQ+BaPpy76YK5Zl/gRXGALzIOPLXZHLTsmT5huAowyI3YUzgeuLqt4yz3lrsY7e1t+HaZP7xBeB22zYU/O8UMqhyxgZwWxA8AvFlu1SExyaQYqYTkLue4a1bOGw88e1/y5nW5aOy7/8f8umJgH4+n7Qnfd3ydUbah7hZm17lwKvUyai6qQ1Jsx/qV2Mo3HIVTm2jLgBBYElOdzzpMprYuaux9jWnxp/17JW3nVaawBNf1ctnNzwJndbJJp3OvErRv6lhulCpW7RbmWvjjsh5kLmpZIOG/g+S2ni96dqmnbUGtWQwpszud2dnWdUZMBQOO5hGg9CCGHxb7sN7s9FI=
  - secure: oyff0rgvpb5liVv/M9yEcIRqT13kayYrpLGl5OGcxtkCKypakf6AxEz4uF6wfv2+4ZqQsuGU90Pt/JErKFm61LSi3+fJ8kaT9WBWqwsS5UDkEvACto1pmRVLrtEfyhC8a6XmSCmZc7FNUKGNPDLiekgNwceeUMJprohzFDkqAvtL6pjEiueJW1KoG/JaqDyw+nUUDWp+2bVHYLsxV1rT1n1AeNVOB1YibscEO1GdHunBYvAZII7cC5ZhYd8iqbskwX7sVwVkSpbYiyH9ax+4Nye98GerNYyNFheMoJXEzaHJIiEkG05SBapapanmYYmjMfzmvnaEdvuCKmBA1NuTXxHTRdhl1HY+1o5/L+/YJ0vLXPbpaCeeq8ZKhWVtsOF/KFbaC2rHkwqMhtRwwB0aojz9wb5lkCUjn1Hl5gLXwLXfi0G9/2MevIz/xjhna9Lg6FY3CSoz2313UOlrXas3pesyJApH+GQXb+uLCJXYLxeTvbPFY1A0ktyHy21AvBQ7uUiIEObTB7EVU73R80ZeaF6UBuP8pNDHsroIwY8LV211+nRZmOWjxu/g0Cxc7+g6XFFDiveOTww3nAQAlB1IY6s4X2qXK0uQhnF58AQb0Loe6Z9qBRPSP1LzoX57a/5EMTlC1Kk7DIdu1eTQSWGi746xz2h+csFDnDYD0YfOKPw=
  - secure: PijiaYPhtYp8qnL0eTgil9N9oNvBiTQncB+rY+vXfUMZmNJ6WUsPLYKqD5JckezPbhfovCtDzMoCRzBVgCxn9Av7EQXvCwBuQK1eIAhCll2p+b5Ci2A6n83A9H99kgP+focP/I5sLA/BM7iOzvYl4wM16dFLDrSYk4VwbZxae60lzGPgxuZL4p64lE8sW9WhvE4brWpRb6lDc5HYhYdlsdAqszGQ/4D1L8m7FbUBtPc1q6g15LHpvpPoLRoHQq49eWwhvfthAErq84ov8jn6gezzdFGuSUxu0Maw/uylgmWtPvMl+6uWXW8RVKymrRz788tHTtKWvfSCa9CiU2YN9pN25RUp2c0FqTrSrBrBQ77cDLPbHFVqZirNOFjowgOoeoamcuM+rTVSTSe0MdgpEF29s6rM2lNXKk7065AW8O4O+n29w8IeyOtD6Jn8ggxD1VPXN+oweIWVXJCyYzu0fIcuEJcQVNgDgWWqFjJT6+XlQVry+BbUzA20VqixEE94pzILTh7mz4EEtqg1XtUYWwPbiq1mmlQNwdBevDveGJYleld4yeaG625m+l/6s/CurJDN5ItF/H05q/oblWWmXjUuiivE+rvE0fqFLnVDBx4mOBlxeZ05BwUB1uE2eVDXDJ83/jNbo2IukdaqUgBrcHD3vbCn7Mldb3fgQzyPuUI=
  - secure: T+KI2pOEkR1qVQU6D0K3aWHxIsJbt2ns49Cy0nqeuTrQPAY3AfhNVAw7rmD6S+75PDkh5eBsnGqmDgdEBCYINlMutMRtkRLR0Ev+WbUqYGP6UjieM7Txym9doNpqKphDhy27CWhiHqZAiGI5TyR8CCrBRCY1cRwUFOps8QaSpK8JZVGbi2hBBskTLmEOBLLlt9K6g/gw8UAqM6o2PUYl83zGZMxoUKZb4oUTK2d8QVKg7oMzeGBBmsNpn8wG98Ug9zDECauzy+3ik/lzmFB0cVMEWYCATDvAZFIGZUDIMWxh/vb3L5CAvEVTp9i7FdZRSduKcyEXpoSbltJh/7vsxV8XOmk1l1hiXmDTt/g2PYPehtJXa4S09yHNUhF4jMldoRWdWjf6JuK/0qgE9XkP3O3QPgUDNH9IYbhq4OrPNjqMuICiT1pkKcBU2d4+8CDq7r+dEllvCxryRYidH8xR9X8jLYGZVfNFmGM7vxE7M/fgD72J/he8VqOxXtrWnc8OER8/bRFrwnWYBlNASCtp01O1lkHRO0aMG1quYXM/qa+24XNDZxE9Ry73rPQTy1gCedRvmxNziXF+p9LFjoNAHaN3EYtmkGmRlcPbK059ExWMcHcA2P5Vu/pLMRhgSrUt7SbhjNIU6WzGKFRf4BIl6XSHZe2cxDoQz2XM9A7S1EY=
